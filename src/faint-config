#!/bin/sh
#
# Config file for faint
#
# Dependencies: setsid (Optional; For better launching experience)

#===============================================================================
#                             Default Settings
#===============================================================================

SHOW_HIDDEN=1
USE_FILTERS=1
MAX_DEPTH=1

#===============================================================================
# Bindings ( ⁉ has to be a single character!) [ More on fzf man page ]
#===============================================================================

KEY_LAUNCH=';'
KEY_RUN=':'
KEY_BACK=','
KEY_OPERATE='space'
KEY_QUIT='esc'

KEY_SHELL='enter'

KEY_UP='btab'
KEY_DOWN='tab'

KEY_MARK_DOWN=']'
KEY_MARK_UP='['
KEY_MARK_ALL='\\'

KEY_BOOKMARK_BROWSE="'"
KEY_BOOKMARK_ADD='\"'

KEY_TOGGLE_HIDDEN=">"
KEY_TOGGLE_FILTERS='.'

KEY_REFRESH="<"

KEY_DEPTH_PLUS="="
KEY_DEPTH_MINUS="-"
KEY_DEPTH_RESET="_"

#===============================================================================
#                             Filters
#===============================================================================

#----------------------------------------------
# <FILE>/<FOLDER; ( ⁉  No Sapces between lines )
#----------------------------------------------
FILTERS="\
node_modules;
package-lock.json;
yarn.lock;
.git;
"

#===============================================================================
#                             Operations
#===============================================================================

trash() { echo "$FILE_ARGS" | while read -r file; do mv "$file" "$TRASH"; done; }
delete() { echo "$FILE_ARGS" | while read -r file; do rm -fr "$file"; done; }
yank() {
   echo "$FILE_ARGS" > "$FILE_LIST_PATH"
   echo "$FILE_ARGS" | xsel -b 2> /dev/null
}
paste() {
   echo "$FILE_LIST" |
      while read -r file; do
         cp -br "$file" "$LAST_DIR"
      done
}
move() {
   echo "$FILE_LIST" |
      while read -r file; do
         mv -f "$file" "$LAST_DIR"
      done
}
bulk_move() { kill -37 "$FAINT_PID" && pkill -P "$FAINT_PID"; }
make_dir() { kill -38 "$FAINT_PID" && pkill -P "$FAINT_PID"; }

OPS="\
⚔  Trash:trash;
❌ Delete:delete;
©  Yank:yank;
🖌  Paste:paste;
🚚 Move:move;
🏷  Rename:bulk_move;
📁 Create Directory:make_dir;
"

#===============================================================================
#                             Launching
#===============================================================================

# Helper function: Forks & suppresses the output of a given commmand
fork() { setsid -f "$@" > /dev/null 2>&1 & }

execute() {
   case ${1##*.} in
      # <EXT1> | <EXT2 | ...) <CMD>;;
      mp4 | mkv | gif) fork mpv "$1" ;;
      # default
      *) $EDITOR "$1" ;;
   esac
}

#===============================================================================
#                               Icons
#===============================================================================

ICONS="\
dir:📁;
file:📃;
link:⛓;
md:📘;
pdf|epub:📚;
mp4|mkv:🎥;
jpg|jpeg:📸;
png|ico:🖼;
"
