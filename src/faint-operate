#!/bin/sh
#
# Helper script for faint. Allows misc operations on files
#
# Dependencie: cat

. faint-config

LIST=/tmp/FAINT_FILE_LIST
FILES=$(
   for file in "$@"; do
      read -r LAST_DIR < "$LAST_PATH"
      echo "$LAST_DIR/${file#* }"
   done
)
export FZF_DEFAULT_OPTS="$FZF_DEFAULT_OPTS --bind=tab:down,btab:up,\;:accept"

get_config() {
   CURRENT_IFS=$IFS
   IFS=$(printf ';')
   for line in $OPS; do
      case $1 in
         -o) printf "%s" "${line%%:*}" ;;
         -c)
            case $line in
               *"$2"*) TEMP=${line%;*} && echo "${TEMP#*:}" && break ;;
            esac
            ;;
      esac
   done
   IFS=$CURRENT_IFS
}

main() {
   CHOICE=$(get_config -o | fzf) &&
      CMD=$(get_config -c "${CHOICE#* }") &&
      $CMD 2> /dev/null
}
main
